(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7UCR":function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",(function(){return I}));var o=i("fXoL"),n=i("tyNb"),c=i("ofXK"),r=i("ssQ5"),s=i("3Pt+");function b(e,t){1&e&&(o.Mb(0,"div",12),o.jc(1,"Username and/or password is wrong"),o.Lb())}function l(e,t){1&e&&(o.Mb(0,"em"),o.jc(1,"*Required"),o.Lb())}function a(e,t){1&e&&(o.Mb(0,"em"),o.jc(1,"*Required"),o.Lb())}let d=(()=>{class e{constructor(e,t,i){this.router=e,this.location=t,this.authService=i,this.formInvalid={userName:!1,password:!1},this.authFailed=!1}login(e){this.formInvalid.userName=!!e.form.controls.userName.invalid,this.formInvalid.password=!!e.form.controls.password.invalid,e.valid&&(this.authService.loginUser(e.controls.userName.value,e.controls.password.value),void 0===this.authService.currentUser?this.authFailed=!0:this.router.navigate(["user/subscribers"]))}cancel(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(n.a),o.Jb(c.f),o.Jb(r.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-login"]],decls:21,vars:3,consts:[[1,"button-back",3,"click"],["autocomplete","off",1,"customForm",3,"ngSubmit"],["loginForm","ngForm"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","userName",1,"form-label"],[4,"ngIf"],["name","userName","id","userName","type","text","placeholder","User Name...","required","",1,"form-control",3,"ngModel"],["for","password",1,"form-label"],["name","password","id","password","type","password","placeholder","Password...","required","",1,"form-control",3,"ngModel"],[1,"button-container"],["type","submit",1,"form-button"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e){const e=o.Nb();o.Mb(0,"a",0),o.Ub("click",(function(){return t.cancel()})),o.jc(1,"<< back"),o.Lb(),o.Mb(2,"h1"),o.jc(3,"Login"),o.Lb(),o.Kb(4,"hr"),o.Mb(5,"form",1,2),o.Ub("ngSubmit",(function(){o.fc(e);const i=o.ec(6);return t.login(i)})),o.ic(7,b,2,0,"div",3),o.Mb(8,"div",4),o.Mb(9,"label",5),o.jc(10,"User Name:"),o.Lb(),o.ic(11,l,2,0,"em",6),o.Mb(12,"input",7),o.Ub("ngModel",(function(){return t.userName})),o.Lb(),o.Lb(),o.Mb(13,"div",4),o.Mb(14,"label",8),o.jc(15,"Password:"),o.Lb(),o.ic(16,a,2,0,"em",6),o.Mb(17,"input",9),o.Ub("ngModel",(function(){return t.password})),o.Lb(),o.Lb(),o.Mb(18,"p",10),o.Mb(19,"button",11),o.jc(20,"Login"),o.Lb(),o.Lb(),o.Lb()}if(2&e){const e=o.ec(6);o.zb(7),o.Zb("ngIf",t.authFailed),o.zb(4),o.Zb("ngIf",(null==e.controls.userName?null:e.controls.userName.invalid)&&(null==e.controls.userName?null:e.controls.userName.touched)||t.formInvalid.userName),o.zb(5),o.Zb("ngIf",(null==e.controls.password?null:e.controls.password.invalid)&&(null==e.controls.password?null:e.controls.password.touched)||t.formInvalid.password)}},directives:[s.j,s.d,s.e,c.i,s.a,s.h,s.c,s.f],styles:[".customForm[_ngcontent-%COMP%]{max-width:20rem;margin-left:auto;margin-right:auto}.customForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem;margin-top:1.5rem}.customForm[_ngcontent-%COMP%]   button.button-secondary[_ngcontent-%COMP%]{margin-left:2rem}.customForm[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:1.5rem;float:right;margin-top:.4rem}"]}),e})();var u=i("e4nA"),m=i("wywh"),p=i("8Xpi"),f=i("H1Cx"),g=i("YUqS");function M(e,t){if(1&e&&(o.Mb(0,"option"),o.jc(1),o.Lb()),2&e){const e=t.$implicit;o.zb(1),o.kc(e.name)}}function h(e,t){1&e&&(o.Mb(0,"span"),o.jc(1,"all topics"),o.Lb())}function L(e,t){if(1&e&&(o.Mb(0,"span"),o.jc(1),o.Lb()),2&e){const e=o.Wb();o.zb(1),o.kc(e.selectedTopic.toLocaleLowerCase())}}function v(e,t){if(1&e){const e=o.Nb();o.Mb(0,"div",31),o.Mb(1,"p",32),o.Mb(2,"span"),o.jc(3),o.Lb(),o.jc(4),o.Lb(),o.Mb(5,"button",33),o.Ub("click",(function(){o.fc(e);const i=t.$implicit;return o.Wb().deleteButtonCLick(i)})),o.jc(6,"delete"),o.Lb(),o.Lb()}if(2&e){const e=t.$implicit,i=t.index;o.zb(3),o.lc("",i+1,"."),o.zb(1),o.lc(" ",e.mail,"")}}function C(e,t){if(1&e&&(o.Mb(0,"div",31),o.jc(1),o.Lb()),2&e){const e=o.Wb();o.zb(1),o.lc("No subscribers for ",e.selectedTopic,"")}}function w(e,t){1&e&&(o.Mb(0,"span"),o.jc(1,"s"),o.Lb())}function j(e,t){if(1&e&&(o.Mb(0,"option"),o.jc(1),o.Lb()),2&e){const e=t.$implicit;o.zb(1),o.kc(e)}}function S(e,t){1&e&&(o.Mb(0,"span"),o.jc(1,"s"),o.Lb())}function k(e,t){if(1&e&&(o.Mb(0,"div"),o.Mb(1,"p",32),o.jc(2),o.Lb(),o.Kb(3,"br"),o.Lb()),2&e){const e=t.$implicit;o.zb(2),o.lc("Mail sent to ",e.mail,"")}}let O=(()=>{class e{constructor(e,t,i){this.topicsService=e,this.subscribersService=t,this.$=i,this.selectedTopic="All topics",this.subscriberToDelete={mail:"",id:"",topic:""}}ngOnInit(){this.$("#main-container").addClass("admin-interface"),this.topics=this.topicsService.getTopics(),this.topics.unshift({name:"All topics"}),this.getCurrentSelectedTopic(""),this.templates=["example 1","example 2","example 3"]}ngOnDestroy(){this.$("#main-container").removeClass("admin-interface")}selectInputChanged(e){const t="All topics"===e.target.value?"":e.target.value;this.selectedTopic=e.target.value,this.getCurrentSelectedTopic(t)}deleteButtonCLick(e){this.subscriberToDelete=e}getCurrentSelectedTopic(e){this.subscribersSelectedTopic=this.subscribersService.getSubscribers(e="All topics"==e?"":e),this.countSubscribers=this.subscribersService.getCountSubscribers(e),this.$("#modal-title").text(`Send mail to all subscribers of ${this.selectedTopic}`)}mailModalClicked(){this.$("#mail-modal").modal("hide"),this.countSubscribers<1?this.$("#failed-mail-modal").modal("show"):this.$("#confirmation-mail-modal").modal("show")}confirmMailModalClicked(){this.$("#confirmation-mail-modal").modal("hide"),this.$("#failed-mail-modal").modal("hide")}deleteModalClicked(){this.$("#delete-modal").modal("hide"),this.subscribersService.deleteSubscriber(this.subscriberToDelete.id)?this.$("#confirmation-delete-modal").modal("show"):this.$("#failed-delete-modal").modal("show"),this.getCurrentSelectedTopic(this.selectedTopic)}deleteModalCancel(){this.$("#delete-modal").modal("hide")}confirmDeleteModalClicked(){this.$("#failed-delete-modal").modal("hide"),this.$("#confirmation-delete-modal").modal("hide")}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(m.a),o.Jb(p.a),o.Jb(u.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-subscribers"]],decls:79,vars:16,consts:[[1,"select-container"],["autocomplete","off",1,"customForm"],["selectTopicForm","ngForm"],["for","userName",1,"form-label"],[1,"form-control",3,"change"],[4,"ngFor","ngForOf"],["id","messages"],[1,"button-container-admin"],[4,"ngIf"],["customModal-trigger","mail-modal"],[1,"admin-container"],["class","subscriber",4,"ngFor","ngForOf"],["class","subscriber",4,"ngIf"],["elementId","mail-modal"],[1,"mail-modal","customForm"],[1,"alert","alert-danger"],[1,"form-group"],["for","Email",1,"form-label"],["name","","id","",1,"form-control"],[1,"button-container"],[3,"click"],["elementId","confirmation-mail-modal"],[1,"alert","alert-info"],[1,"subscriber-list"],[1,"button-container","confirm"],["elementId","failed-mail-modal"],["elementId","delete-modal","title","Delete subscriber"],[1,"button-container","twoButtons"],[1,"red",3,"click"],["elementId","confirmation-delete-modal","title","Delete subscriber"],["elementId","failed-delete-modal","title","Delete subscriber"],[1,"subscriber"],[1,"mail"],["customModal-trigger","delete-modal",3,"click"]],template:function(e,t){1&e&&(o.Mb(0,"h1"),o.jc(1,"Subscription manager"),o.Lb(),o.Mb(2,"div",0),o.Mb(3,"form",1,2),o.Mb(5,"label",3),o.jc(6,"Select a topic : "),o.Lb(),o.Mb(7,"select",4),o.Ub("change",(function(e){return t.selectInputChanged(e)})),o.ic(8,M,2,1,"option",5),o.Lb(),o.Lb(),o.Lb(),o.Mb(9,"h2"),o.jc(10),o.Lb(),o.Kb(11,"hr"),o.Kb(12,"div",6),o.Mb(13,"div",7),o.Mb(14,"p"),o.jc(15,"Send mail to the subscribers of "),o.ic(16,h,2,0,"span",8),o.ic(17,L,2,1,"span",8),o.Lb(),o.Mb(18,"button",9),o.jc(19,"Send mail "),o.Lb(),o.Lb(),o.Mb(20,"div",10),o.ic(21,v,7,2,"div",11),o.ic(22,C,2,1,"div",12),o.Kb(23,"br"),o.Mb(24,"app-custom-modal",13),o.Mb(25,"div",14),o.Mb(26,"div",15),o.jc(27),o.ic(28,w,2,0,"span",8),o.jc(29," !"),o.Lb(),o.Mb(30,"div",16),o.Mb(31,"label",17),o.jc(32,"select email-template"),o.Lb(),o.Mb(33,"select",18),o.ic(34,j,2,1,"option",5),o.Lb(),o.Lb(),o.Mb(35,"div",19),o.Mb(36,"button",20),o.Ub("click",(function(){return t.mailModalClicked()})),o.jc(37,"Send"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(38,"app-custom-modal",21),o.Mb(39,"div",14),o.Mb(40,"div",22),o.jc(41),o.ic(42,S,2,0,"span",8),o.jc(43," !"),o.Lb(),o.Mb(44,"div",23),o.ic(45,k,4,1,"div",5),o.Lb(),o.Mb(46,"div",24),o.Mb(47,"button",20),o.Ub("click",(function(){return t.confirmMailModalClicked()})),o.jc(48,"ok"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(49,"app-custom-modal",25),o.Mb(50,"div",14),o.Mb(51,"div",15),o.jc(52),o.Lb(),o.Mb(53,"div",24),o.Mb(54,"button",20),o.Ub("click",(function(){return t.confirmMailModalClicked()})),o.jc(55,"ok"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(56,"app-custom-modal",26),o.Mb(57,"div",14),o.Mb(58,"p"),o.jc(59),o.Lb(),o.Mb(60,"div",27),o.Mb(61,"button",20),o.Ub("click",(function(){return t.deleteModalClicked()})),o.jc(62,"yes"),o.Lb(),o.Mb(63,"button",28),o.Ub("click",(function(){return t.deleteModalCancel()})),o.jc(64,"no"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(65,"app-custom-modal",29),o.Mb(66,"div",14),o.Mb(67,"div",22),o.jc(68),o.Lb(),o.Mb(69,"div",24),o.Mb(70,"button",20),o.Ub("click",(function(){return t.confirmDeleteModalClicked()})),o.jc(71,"ok"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(72,"app-custom-modal",30),o.Mb(73,"div",14),o.Mb(74,"div",15),o.jc(75),o.Lb(),o.Mb(76,"div",19),o.Mb(77,"button",20),o.Ub("click",(function(){return t.confirmDeleteModalClicked()})),o.jc(78,"ok"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb()),2&e&&(o.zb(8),o.Zb("ngForOf",t.topics),o.zb(2),o.lc("Subscribers of ",t.selectedTopic,""),o.zb(6),o.Zb("ngIf",""==t.selectedTopic),o.zb(1),o.Zb("ngIf",""!=t.selectedTopic),o.zb(4),o.Zb("ngForOf",t.subscribersSelectedTopic),o.zb(1),o.Zb("ngIf",t.countSubscribers<1),o.zb(5),o.lc("You are about to send : (",t.countSubscribers,") subscriber"),o.zb(1),o.Zb("ngIf",t.countSubscribers>1||0==t.countSubscribers),o.zb(6),o.Zb("ngForOf",t.templates),o.zb(7),o.lc("mail sent to (",t.countSubscribers,") subscriber"),o.zb(1),o.Zb("ngIf",t.countSubscribers>1||0==t.countSubscribers),o.zb(3),o.Zb("ngForOf",t.subscribersSelectedTopic),o.zb(7),o.lc("mail not sent : ",t.selectedTopic," has no subscribers ! "),o.zb(7),o.lc("Do you want to delete ",t.subscriberToDelete.mail,"?"),o.zb(9),o.lc("subscriber ",t.subscriberToDelete.mail," deleted"),o.zb(7),o.lc("Could not delete subscriber ",t.subscriberToDelete.mail," : not found ! "))},directives:[s.j,s.d,s.e,c.h,c.i,f.a,g.a,s.g,s.i],styles:["@media screen and (max-width:768px){h2[_ngcontent-%COMP%]{text-align:center}}.subscriber[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,100%,.1);background:hsla(0,0%,100%,.1);padding:2rem;max-width:80rem;margin:2rem auto;display:flex;justify-content:space-between;align-items:center}@media screen and (max-width:768px){.subscriber[_ngcontent-%COMP%], .subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{display:flex;flex-flow:column}.subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{text-align:center;font-size:1.7rem}}@media screen and (max-width:420px){.subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{overflow-x:scroll;max-width:100%}}.subscriber[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#862c2c;margin-top:0}@media screen and (max-width:768px){.subscriber[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:1.6rem}}.subscriber-list[_ngcontent-%COMP%]{height:30rem;overflow-y:scroll;margin-top:2rem;margin-bottom:1rem}@media screen and (max-width:768px){.subscriber-list[_ngcontent-%COMP%]{height:15rem}.subscriber-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem}}@media screen and (max-width:420px){.subscriber-list[_ngcontent-%COMP%]{overflow-x:scroll;height:12rem;max-width:280px}}.customForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.8rem}"]}),e})(),x=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e){return"subscribers"==e.routeConfig.path?(this.authService.isLoggedIn()||this.router.navigate(["/user"]),!0):(this.authService.isLoggedIn()&&this.router.navigate(["user/subscribers"]),!0)}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(r.a),o.Qb(n.a))},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac}),e})();const z=[{path:"",component:d,canActivate:[x]},{path:"subscribers",component:O,canActivate:[x]}];var P=i("HUga");let I=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},providers:[x],imports:[[c.b,n.c.forChild(z),s.b,P.a]]}),e})()}}]);