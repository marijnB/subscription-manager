function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7UCR":function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",(function(){return F}));var n=i("fXoL"),o=i("tyNb"),c=i("ofXK"),r=i("ssQ5"),s=i("3Pt+");function a(e,t){1&e&&(n.Mb(0,"div",12),n.jc(1,"Username and/or password is wrong"),n.Lb())}function l(e,t){1&e&&(n.Mb(0,"em"),n.jc(1,"*Required"),n.Lb())}function b(e,t){1&e&&(n.Mb(0,"em"),n.jc(1,"*Required"),n.Lb())}var u,d=((u=function(){function e(t,i,n){_classCallCheck(this,e),this.router=t,this.location=i,this.authService=n,this.formInvalid={userName:!1,password:!1},this.authFailed=!1}return _createClass(e,[{key:"login",value:function(e){this.formInvalid.userName=!!e.form.controls.userName.invalid,this.formInvalid.password=!!e.form.controls.password.invalid,e.valid&&(this.authService.loginUser(e.controls.userName.value,e.controls.password.value),void 0===this.authService.currentUser?this.authFailed=!0:this.router.navigate(["user/subscribers"]))}},{key:"cancel",value:function(){this.location.back()}}]),e}()).\u0275fac=function(e){return new(e||u)(n.Jb(o.a),n.Jb(c.f),n.Jb(r.a))},u.\u0275cmp=n.Db({type:u,selectors:[["app-login"]],decls:21,vars:3,consts:[[1,"button-back",3,"click"],["autocomplete","off",1,"customForm",3,"ngSubmit"],["loginForm","ngForm"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","userName",1,"form-label"],[4,"ngIf"],["name","userName","id","userName","type","text","placeholder","User Name...","required","",1,"form-control",3,"ngModel"],["for","password",1,"form-label"],["name","password","id","password","type","password","placeholder","Password...","required","",1,"form-control",3,"ngModel"],[1,"button-container"],["type","submit",1,"form-button"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e){var i=n.Nb();n.Mb(0,"a",0),n.Ub("click",(function(){return t.cancel()})),n.jc(1,"<< back"),n.Lb(),n.Mb(2,"h1"),n.jc(3,"Login"),n.Lb(),n.Kb(4,"hr"),n.Mb(5,"form",1,2),n.Ub("ngSubmit",(function(){n.fc(i);var e=n.ec(6);return t.login(e)})),n.ic(7,a,2,0,"div",3),n.Mb(8,"div",4),n.Mb(9,"label",5),n.jc(10,"User Name:"),n.Lb(),n.ic(11,l,2,0,"em",6),n.Mb(12,"input",7),n.Ub("ngModel",(function(){return t.userName})),n.Lb(),n.Lb(),n.Mb(13,"div",4),n.Mb(14,"label",8),n.jc(15,"Password:"),n.Lb(),n.ic(16,b,2,0,"em",6),n.Mb(17,"input",9),n.Ub("ngModel",(function(){return t.password})),n.Lb(),n.Lb(),n.Mb(18,"p",10),n.Mb(19,"button",11),n.jc(20,"Login"),n.Lb(),n.Lb(),n.Lb()}if(2&e){var o=n.ec(6);n.zb(7),n.Zb("ngIf",t.authFailed),n.zb(4),n.Zb("ngIf",(null==o.controls.userName?null:o.controls.userName.invalid)&&(null==o.controls.userName?null:o.controls.userName.touched)||t.formInvalid.userName),n.zb(5),n.Zb("ngIf",(null==o.controls.password?null:o.controls.password.invalid)&&(null==o.controls.password?null:o.controls.password.touched)||t.formInvalid.password)}},directives:[s.j,s.d,s.e,c.i,s.a,s.h,s.c,s.f],styles:[".customForm[_ngcontent-%COMP%]{max-width:20rem;margin-left:auto;margin-right:auto}.customForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8rem;margin-top:1.5rem}.customForm[_ngcontent-%COMP%]   button.button-secondary[_ngcontent-%COMP%]{margin-left:2rem}.customForm[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:1.5rem;float:right;margin-top:.4rem}"]}),u),m=i("e4nA"),f=i("wywh"),p=i("8Xpi"),h=i("H1Cx"),g=i("YUqS");function M(e,t){if(1&e&&(n.Mb(0,"option"),n.jc(1),n.Lb()),2&e){var i=t.$implicit;n.zb(1),n.kc(i.name)}}function v(e,t){1&e&&(n.Mb(0,"span"),n.jc(1,"all topics"),n.Lb())}function L(e,t){if(1&e&&(n.Mb(0,"span"),n.jc(1),n.Lb()),2&e){var i=n.Wb();n.zb(1),n.kc(i.selectedTopic.toLocaleLowerCase())}}function C(e,t){if(1&e){var i=n.Nb();n.Mb(0,"div",31),n.Mb(1,"p",32),n.Mb(2,"span"),n.jc(3),n.Lb(),n.jc(4),n.Lb(),n.Mb(5,"button",33),n.Ub("click",(function(){n.fc(i);var e=t.$implicit;return n.Wb().deleteButtonCLick(e)})),n.jc(6,"delete"),n.Lb(),n.Lb()}if(2&e){var o=t.$implicit,c=t.index;n.zb(3),n.lc("",c+1,"."),n.zb(1),n.lc(" ",o.mail,"")}}function k(e,t){if(1&e&&(n.Mb(0,"div",31),n.jc(1),n.Lb()),2&e){var i=n.Wb();n.zb(1),n.lc("No subscribers for ",i.selectedTopic,"")}}function w(e,t){1&e&&(n.Mb(0,"span"),n.jc(1,"s"),n.Lb())}function j(e,t){if(1&e&&(n.Mb(0,"option"),n.jc(1),n.Lb()),2&e){var i=t.$implicit;n.zb(1),n.kc(i)}}function S(e,t){1&e&&(n.Mb(0,"span"),n.jc(1,"s"),n.Lb())}function _(e,t){if(1&e&&(n.Mb(0,"div"),n.Mb(1,"p",32),n.jc(2),n.Lb(),n.Kb(3,"br"),n.Lb()),2&e){var i=t.$implicit;n.zb(2),n.lc("Mail sent to ",i.mail,"")}}var y,O,P,x=((O=function(){function e(t,i,n){_classCallCheck(this,e),this.topicsService=t,this.subscribersService=i,this.$=n,this.selectedTopic="All topics",this.subscriberToDelete={mail:"",id:"",topic:""}}return _createClass(e,[{key:"ngOnInit",value:function(){this.$("#main-container").addClass("admin-interface"),this.topics=this.topicsService.getTopics(),this.topics.unshift({name:"All topics"}),this.getCurrentSelectedTopic(""),this.templates=["example 1","example 2","example 3"]}},{key:"ngOnDestroy",value:function(){this.$("#main-container").removeClass("admin-interface")}},{key:"selectInputChanged",value:function(e){var t="All topics"===e.target.value?"":e.target.value;this.selectedTopic=e.target.value,this.getCurrentSelectedTopic(t)}},{key:"deleteButtonCLick",value:function(e){this.subscriberToDelete=e}},{key:"getCurrentSelectedTopic",value:function(e){this.subscribersSelectedTopic=this.subscribersService.getSubscribers(e="All topics"==e?"":e),this.countSubscribers=this.subscribersService.getCountSubscribers(e),this.$("#modal-title").text("Send mail to all subscribers of ".concat(this.selectedTopic))}},{key:"mailModalClicked",value:function(){this.$("#mail-modal").modal("hide"),this.countSubscribers<1?this.$("#failed-mail-modal").modal("show"):this.$("#confirmation-mail-modal").modal("show")}},{key:"confirmMailModalClicked",value:function(){this.$("#confirmation-mail-modal").modal("hide"),this.$("#failed-mail-modal").modal("hide")}},{key:"deleteModalClicked",value:function(){this.$("#delete-modal").modal("hide"),this.subscribersService.deleteSubscriber(this.subscriberToDelete.id)?this.$("#confirmation-delete-modal").modal("show"):this.$("#failed-delete-modal").modal("show"),this.getCurrentSelectedTopic(this.selectedTopic)}},{key:"deleteModalCancel",value:function(){this.$("#delete-modal").modal("hide")}},{key:"confirmDeleteModalClicked",value:function(){this.$("#failed-delete-modal").modal("hide"),this.$("#confirmation-delete-modal").modal("hide")}}]),e}()).\u0275fac=function(e){return new(e||O)(n.Jb(f.a),n.Jb(p.a),n.Jb(m.a))},O.\u0275cmp=n.Db({type:O,selectors:[["app-subscribers"]],decls:79,vars:16,consts:[[1,"select-container"],["autocomplete","off",1,"customForm"],["selectTopicForm","ngForm"],["for","userName",1,"form-label"],[1,"form-control",3,"change"],[4,"ngFor","ngForOf"],["id","messages"],[1,"button-container-admin"],[4,"ngIf"],["customModal-trigger","mail-modal"],[1,"admin-container"],["class","subscriber",4,"ngFor","ngForOf"],["class","subscriber",4,"ngIf"],["elementId","mail-modal"],[1,"mail-modal","customForm"],[1,"alert","alert-danger"],[1,"form-group"],["for","Email",1,"form-label"],["name","","id","",1,"form-control"],[1,"button-container"],[3,"click"],["elementId","confirmation-mail-modal"],[1,"alert","alert-info"],[1,"subscriber-list"],[1,"button-container","confirm"],["elementId","failed-mail-modal"],["elementId","delete-modal","title","Delete subscriber"],[1,"button-container","twoButtons"],[1,"red",3,"click"],["elementId","confirmation-delete-modal","title","Delete subscriber"],["elementId","failed-delete-modal","title","Delete subscriber"],[1,"subscriber"],[1,"mail"],["customModal-trigger","delete-modal",3,"click"]],template:function(e,t){1&e&&(n.Mb(0,"h1"),n.jc(1,"Subscription manager"),n.Lb(),n.Mb(2,"div",0),n.Mb(3,"form",1,2),n.Mb(5,"label",3),n.jc(6,"Select a topic : "),n.Lb(),n.Mb(7,"select",4),n.Ub("change",(function(e){return t.selectInputChanged(e)})),n.ic(8,M,2,1,"option",5),n.Lb(),n.Lb(),n.Lb(),n.Mb(9,"h2"),n.jc(10),n.Lb(),n.Kb(11,"hr"),n.Kb(12,"div",6),n.Mb(13,"div",7),n.Mb(14,"p"),n.jc(15,"Send mail to the subscribers of "),n.ic(16,v,2,0,"span",8),n.ic(17,L,2,1,"span",8),n.Lb(),n.Mb(18,"button",9),n.jc(19,"Send mail "),n.Lb(),n.Lb(),n.Mb(20,"div",10),n.ic(21,C,7,2,"div",11),n.ic(22,k,2,1,"div",12),n.Kb(23,"br"),n.Mb(24,"app-custom-modal",13),n.Mb(25,"div",14),n.Mb(26,"div",15),n.jc(27),n.ic(28,w,2,0,"span",8),n.jc(29," !"),n.Lb(),n.Mb(30,"div",16),n.Mb(31,"label",17),n.jc(32,"select email-template"),n.Lb(),n.Mb(33,"select",18),n.ic(34,j,2,1,"option",5),n.Lb(),n.Lb(),n.Mb(35,"div",19),n.Mb(36,"button",20),n.Ub("click",(function(){return t.mailModalClicked()})),n.jc(37,"Send"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(38,"app-custom-modal",21),n.Mb(39,"div",14),n.Mb(40,"div",22),n.jc(41),n.ic(42,S,2,0,"span",8),n.jc(43," !"),n.Lb(),n.Mb(44,"div",23),n.ic(45,_,4,1,"div",5),n.Lb(),n.Mb(46,"div",24),n.Mb(47,"button",20),n.Ub("click",(function(){return t.confirmMailModalClicked()})),n.jc(48,"ok"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(49,"app-custom-modal",25),n.Mb(50,"div",14),n.Mb(51,"div",15),n.jc(52),n.Lb(),n.Mb(53,"div",24),n.Mb(54,"button",20),n.Ub("click",(function(){return t.confirmMailModalClicked()})),n.jc(55,"ok"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(56,"app-custom-modal",26),n.Mb(57,"div",14),n.Mb(58,"p"),n.jc(59),n.Lb(),n.Mb(60,"div",27),n.Mb(61,"button",20),n.Ub("click",(function(){return t.deleteModalClicked()})),n.jc(62,"yes"),n.Lb(),n.Mb(63,"button",28),n.Ub("click",(function(){return t.deleteModalCancel()})),n.jc(64,"no"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(65,"app-custom-modal",29),n.Mb(66,"div",14),n.Mb(67,"div",22),n.jc(68),n.Lb(),n.Mb(69,"div",24),n.Mb(70,"button",20),n.Ub("click",(function(){return t.confirmDeleteModalClicked()})),n.jc(71,"ok"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Mb(72,"app-custom-modal",30),n.Mb(73,"div",14),n.Mb(74,"div",15),n.jc(75),n.Lb(),n.Mb(76,"div",19),n.Mb(77,"button",20),n.Ub("click",(function(){return t.confirmDeleteModalClicked()})),n.jc(78,"ok"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Lb()),2&e&&(n.zb(8),n.Zb("ngForOf",t.topics),n.zb(2),n.lc("Subscribers of ",t.selectedTopic,""),n.zb(6),n.Zb("ngIf",""==t.selectedTopic),n.zb(1),n.Zb("ngIf",""!=t.selectedTopic),n.zb(4),n.Zb("ngForOf",t.subscribersSelectedTopic),n.zb(1),n.Zb("ngIf",t.countSubscribers<1),n.zb(5),n.lc("You are about to send : (",t.countSubscribers,") subscriber"),n.zb(1),n.Zb("ngIf",t.countSubscribers>1||0==t.countSubscribers),n.zb(6),n.Zb("ngForOf",t.templates),n.zb(7),n.lc("mail sent to (",t.countSubscribers,") subscriber"),n.zb(1),n.Zb("ngIf",t.countSubscribers>1||0==t.countSubscribers),n.zb(3),n.Zb("ngForOf",t.subscribersSelectedTopic),n.zb(7),n.lc("mail not sent : ",t.selectedTopic," has no subscribers ! "),n.zb(7),n.lc("Do you want to delete ",t.subscriberToDelete.mail,"?"),n.zb(9),n.lc("subscriber ",t.subscriberToDelete.mail," deleted"),n.zb(7),n.lc("Could not delete subscriber ",t.subscriberToDelete.mail," : not found ! "))},directives:[s.j,s.d,s.e,c.h,c.i,h.a,g.a,s.g,s.i],styles:["@media screen and (max-width:768px){h2[_ngcontent-%COMP%]{text-align:center}}.subscriber[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,100%,.1);background:hsla(0,0%,100%,.1);padding:2rem;max-width:80rem;margin:2rem auto;display:flex;justify-content:space-between;align-items:center}@media screen and (max-width:768px){.subscriber[_ngcontent-%COMP%], .subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{display:flex;flex-flow:column}.subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{text-align:center;font-size:1.7rem}}@media screen and (max-width:420px){.subscriber[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{overflow-x:scroll;max-width:100%}}.subscriber[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#862c2c;margin-top:0}@media screen and (max-width:768px){.subscriber[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:1.6rem}}.subscriber-list[_ngcontent-%COMP%]{height:30rem;overflow-y:scroll;margin-top:2rem;margin-bottom:1rem}@media screen and (max-width:768px){.subscriber-list[_ngcontent-%COMP%]{height:15rem}.subscriber-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem}}@media screen and (max-width:420px){.subscriber-list[_ngcontent-%COMP%]{overflow-x:scroll;height:12rem;max-width:280px}}.customForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.8rem}"]}),O),z=((y=function(){function e(t,i){_classCallCheck(this,e),this.authService=t,this.router=i}return _createClass(e,[{key:"canActivate",value:function(e){return"subscribers"==e.routeConfig.path?(this.authService.isLoggedIn()||this.router.navigate(["/user"]),!0):(this.authService.isLoggedIn()&&this.router.navigate(["user/subscribers"]),!0)}}]),e}()).\u0275fac=function(e){return new(e||y)(n.Qb(r.a),n.Qb(o.a))},y.\u0275prov=n.Fb({token:y,factory:y.\u0275fac}),y),I=[{path:"",component:d,canActivate:[z]},{path:"subscribers",component:x,canActivate:[z]}],T=i("HUga"),F=((P=function e(){_classCallCheck(this,e)}).\u0275mod=n.Hb({type:P}),P.\u0275inj=n.Gb({factory:function(e){return new(e||P)},providers:[z],imports:[[c.b,o.c.forChild(I),s.b,T.a]]}),P)}}]);